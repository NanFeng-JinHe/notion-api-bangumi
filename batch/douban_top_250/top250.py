from lxml import etree
from util import client
import re


def get_douban_top_250():
    """
    获取豆瓣top250的subject_id
    """
    pages = list(range(0, 226, 25))
    for page in pages:
        url = f'https://movie.douban.com/top250?start={page}'
        response = client.get(url)
        html_tree = etree.HTML(response.content)
        items = html_tree.xpath('//*/ol[@class="grid_view"]/li/div[@class="item"]/div/a')
        for item in items:
            href = item.xpath('@href')[0]
            subject_id = re.search(r'\d+', href)
            title = item.xpath('img/@alt')[0]
            print(f'\'{subject_id.group()}\',  #{title}')


get_douban_top_250()

"""
'1292052',  #肖申克的救赎
'1291546',  #霸王别姬
'1292720',  #阿甘正传
'1292722',  #泰坦尼克号
'1295644',  #这个杀手不太冷
'1291561',  #千与千寻
'1292063',  #美丽人生
'1889243',  #星际穿越
'3541415',  #盗梦空间
'1295124',  #辛德勒的名单
'1292064',  #楚门的世界
'3011091',  #忠犬八公的故事
'1292001',  #海上钢琴师
'3793023',  #三傻大闹宝莱坞
'1291549',  #放牛班的春天
'2131459',  #机器人总动员
'25662329',  #疯狂动物城
'1307914',  #无间道
'1296141',  #控方证人
'1292213',  #大话西游之大圣娶亲
'5912992',  #熔炉
'1291841',  #教父
'6786002',  #触不可及
'1849031',  #当幸福来敲门
'20495023',  #寻梦环游记
'1293172',  #末代皇帝
'1291560',  #龙猫
'3319755',  #怦然心动
'1292365',  #活着
'1295038',  #哈利·波特与魔法石
'1851857',  #蝙蝠侠：黑暗骑士
'1291552',  #指环王3：王者无敌
'26752088',  #我不是药神
'1300267',  #乱世佳人
'2129039',  #飞屋环游记
'21937452',  #素媛
'1293182',  #十二怒汉
'1308807',  #哈尔的移动城堡
'3742360',  #让子弹飞
'30170448',  #何以为家
'26387939',  #摔跤吧！爸爸
'1305487',  #猫鼠游戏
'1291583',  #天空之城
'1291858',  #鬼子来了
'25958717',  #海蒂和爷爷
'1929463',  #少年派的奇幻漂流
'1296736',  #钢琴家
'1299398',  #大话西游之月光宝盒
'1291572',  #指环王2：双塔奇兵
'1298624',  #闻香识女人
'1291548',  #死亡诗社
'27060077',  #绿皮书
'1293839',  #罗马假日
'1418019',  #大闹天宫
'1291828',  #天堂电影院
'1291571',  #指环王1：护戒使者
'1291843',  #黑客帝国
'1299131',  #教父2
'1301753',  #狮子王
'21937445',  #辩护人
'1291818',  #饮食男女
'1292000',  #搏击俱乐部
'1485260',  #本杰明·巴顿奇事
'1306029',  #美丽心灵
'3008247',  #穿条纹睡衣的男孩
'1900841',  #窃听风暴
'1292220',  #情书
'1293350',  #两杆大烟枪
'1292402',  #西西里的美丽传说
'1294408',  #音乐之声
'26580232',  #看不见的客人
'1652587',  #阿凡达
'3011235',  #哈利·波特与死亡圣器(下)
'1292849',  #拯救大兵瑞恩
'1292224',  #飞越疯人院
'1303021',  #小鞋子
'1293544',  #沉默的羔羊
'11525673',  #布达佩斯大饭店
'1291543',  #功夫
'2334904',  #禁闭岛
'1292343',  #蝴蝶效应
'1780330',  #致命魔术
'1291544',  #哈利·波特与阿兹卡班的囚徒
'1292656',  #心灵捕手
'5322596',  #超脱
'1291832',  #低俗小说
'3442220',  #海豚湾
'1294371',  #摩登时代
'1292679',  #春光乍泄
'1292262',  #美国往事
'1302425',  #喜剧之王
'1297192',  #致命ID
'1300299',  #杀人回忆
'1865703',  #红辣椒
'1292223',  #七宗罪
'1296996',  #哈利·波特与密室
'1298070',  #加勒比海盗
'1292434',  #一一
'6985810',  #狩猎
'1306249',  #唐伯虎点秋香
'10777687',  #7号房的礼物
'1787291',  #被嫌弃的松子的一生
'3395373',  #蝙蝠侠：黑暗骑士崛起
'26799731',  #请以你的名字呼唤我
'1296339',  #爱在黎明破晓前
'1292370',  #剪刀手爱德华
'1418834',  #断背山
'2149806',  #入殓师
'1297630',  #第六感
'1291999',  #重庆森林
'1294639',  #勇敢的心
'11026735',  #超能陆战队
'1305164',  #甜蜜蜜
'1297359',  #幽灵公主
'1291990',  #爱在日落黄昏时
'1293359',  #菊次郎的夏天
'27010768',  #寄生虫
'4202302',  #借东西的小人阿莉埃蒂
'21318488',  #消失的爱人
'1291875',  #阳光灿烂的日子
'1292215',  #天使爱美丽
'1300992',  #完美的世界
'1297447',  #倩女幽魂
'25814705',  #小森林 夏秋篇
'1292337',  #无人知晓
'10577869',  #时空恋旅人
'1395091',  #未麻的部屋
'1297052',  #侧耳倾听
'1309055',  #哈利·波特与火焰杯
'2353023',  #驯龙高手
'1292274',  #幸福终点站
'26628357',  #一个叫欧维的男人决定去死
'25814707',  #小森林 冬春篇
'1294240',  #教父3
'1291579',  #怪兽电力公司
'1858711',  #玩具总动员3
'1418200',  #傲慢与偏见
'10437779',  #新世界
'5989818',  #萤火之森
'1461403',  #茶馆
'25986180',  #釜山行
'6307447',  #被解救的姜戈
'3287562',  #神偷奶爸
'4268598',  #告白
'3072124',  #玛丽和马克思
'1307315',  #哪吒闹海
'1828115',  #色，戒
'1297518',  #九品芝麻官
'1291545',  #大鱼
'1303037',  #喜宴
'10463953',  #模仿游戏
'4920389',  #头号玩家
'1316510',  #射雕英雄传之东成西就
'1291557',  #花样年华
'10533913',  #头脑特工队
'1306861',  #我是山姆
'4917726',  #阳光姐妹淘
'1295399',  #七武士
'26325320',  #血战钢锯岭
'21360417',  #恐怖直播
'1293181',  #惊魂记
'1302467',  #黑客帝国3：矩阵革命
'26683290',  #你的名字。
'1417598',  #电锯惊魂
'26611804',  #三块广告牌
'1793929',  #达拉斯买家俱乐部
'25917973',  #心迷宫
'1907966',  #疯狂原始人
'1578507',  #谍影重重3
'1297574',  #英雄本色
'1292208',  #上帝之城
'1291585',  #风之谷
'10808442',  #爱在午夜降临前
'1295409',  #纵横四海
'25895901',  #海街日记
'1300374',  #绿里奇迹
'1291822',  #卢旺达饭店
'27119724',  #小丑
'1304447',  #记忆碎片
'1307856',  #背靠背，脸对脸
'1862151',  #疯狂的石头
'24733428',  #心灵奇旅
'1293460',  #雨中曲
'1292226',  #2001太空漫游
'3792799',  #岁月神偷
'1307106',  #无间道2
'1959195',  #忠犬八公物语
'24750126',  #荒蛮故事
'27622447',  #小偷家族
'6534248',  #无敌破坏王
'25773932',  #爆裂鼓手
'1291578',  #冰川时代
'3011051',  #恐怖游轮
'1292329',  #牯岭街少年杀人事件
'2209573',  #贫民窟的百万富翁
'1310177',  #东京教父
'1292328',  #东邪西毒
'1307811',  #魔女宅急便
'1867345',  #遗愿清单
'27059130',  #大佛普拉斯
'4848115',  #你看起来好像很好吃
'1308857',  #可可西里
'1978709',  #黑天鹅
'1293908',  #城市之光
'1292401',  #真爱至上
'3075287',  #源代码
'25980443',  #海边的曼彻斯特
'1291870',  #雨人
'5300054',  #波西米亚狂想曲
'1291992',  #末路狂花
'4739952',  #初恋这件小事
'1303394',  #青蛇
'1302827',  #人工智能
'1309163',  #恋恋笔记本
'1296909',  #虎口脱险
'1291844',  #终结者2：审判日
'3592854',  #疯狂的麦克斯4：狂暴之路
'25934014',  #爱乐之城
'1291879',  #罗生门
'1292287',  #新龙门客栈
'1297880',  #芙蓉镇
'1438652',  #无耻混蛋
'1959877',  #崖上的波妞
'1300117',  #千钧一发
'34874432',  #花束般的恋爱
'1293318',  #萤火虫之墓
'25807345',  #彗星来的那一夜
'26787574',  #奇迹男孩
'2051007',  #哈利·波特与死亡圣器(上)
'1304141',  #黑客帝国2：重装上阵
'26430107',  #二十二
'1428175',  #血钻
'1419936',  #战争之王
'25864085',  #火星救援
'2222996',  #步履不停
'25724855',  #房间
'1293964',  #魂断蓝桥
'1307394',  #千年女优
'2133323',  #白日梦想家
'1308767',  #谍影重重2
'1457217',  #哈利·波特与凤凰社
'1422283',  #高山下的花环
'26374197',  #蜘蛛侠：平行宇宙
'3552028',  #弱点
'1304102',  #谍影重重
'1305690',  #阿飞正传
'2213597',  #朗读者
'1293323',  #大红灯笼高高挂
'6874403',  #再次出发之纽约遇见你
'1295865',  #燃情岁月
"""